<%- include(`./partials/head`) %>

<section class="bg-gray-100 dark:bg-gray-900">
  <div class="container mx-auto py-12 px-4 lg:px-6">
    <div class="text-center mb-12">
      <h2 class="text-4xl font-extrabold text-blue-800 dark:text-white">Our Blog</h2>
      <p class="mt-4 text-blue-900 sm:text-xl dark:text-gray-400">We use an agile approach to test assumptions and connect with the needs of your audience early and often.</p>
    </div>
    
    <% if (user) { %>
      <div class="grid gap-8 lg:grid-cols-3 sm:grid-cols-2 grid-cols-1">
        <% blogs.forEach(blog => { %>
          <article class="bg-white rounded-lg shadow-lg dark:bg-gray-800 transition duration-500 hover:shadow-2xl">
            <div class="overflow-hidden rounded-t-lg">
              <img src="/image<%= blog.coverImage %>" alt="Blog Image" class="w-full h-48 object-cover">
            </div>
            <div class="p-6">
              <div class="flex justify-between items-center mb-4 text-gray-500">
                <span class="text-xs font-medium bg-primary-100 text-primary-800 px-2.5 py-0.5 rounded dark:bg-primary-200 dark:text-primary-800">
                  <svg class="inline-block w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"></path>
                  </svg>
                  <%= user.role %>
                </span>
                <span class="text-sm"><%= blog.createdAt.toISOString().split('T')[0] %></span>
              </div>
              <h2 class="mb-3 text-2xl font-bold text-gray-900 dark:text-white"><a href="#" class="hover:text-blue-600 transition duration-300"><%= blog.title %></a></h2>
              <div class="flex items-center space-x-4">
                <img class="w-8 h-8 rounded-full" src="<%= blog.createdBy.profilepic %>" alt="Author">
                <span class="font-medium text-gray-700 dark:text-white"><%= blog.createdBy.fullname %></span>
              </div>
              <div class="mt-4">
                <a href="/blog/<%= blog._id %>" class="text-blue-600 dark:text-blue-500 hover:underline inline-flex items-center">
                  Read more
                  <svg class="ml-2 w-4 h-4" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                  </svg>
                </a>
              </div>
            </div>
          </article>
        <% }) %>
      </div>
    <% } else { %>
      <div class="text-center py-16">
        <h1 class="text-2xl">User not authenticated</h1>
        <p class="mt-4 text-lg">Please <a href="/signin" class="text-blue-500 hover:text-blue-800">Login</a> to see blogs</p>
      </div>
    <% } %>
  </div>
</section>

<%- include(`./partials/foot`) %>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>
